## 独立事件 {#sec-3_8}
本章之前的例子表明，给定 $F$ 时，$E$ 的条件概率 $P(E|F)$ 通常不等于 $E$ 的无条件概率 $P(E)$。换句话说，如果 $F$ 发生了，那么通常会改变 $E$ 发生的可能性。对于特殊的场景下，当 $P(E|F)$ 等于 $P(E)$ 时，我们说 $E$ 与 $F$ 是 **独立** 的。也就是说，如果 $F$ 是否发生不会改变 $E$ 发生的概率，那么 $E$ 就是 **独立** 于 $F$ 的。

因为 $P(E|F)=\frac{ P(EF) }{ P(F) }$，如果 

$$
P(EF)=P(E)P(F)
$$ {#eq-3_8_001}

则 $E$ 和 $F$ 是 **独立** 的。

因为 @eq-3_8_001 中，$E$ 和 $F$ 是对称的，因此如果 $E$ 和 $F$ 是 **独立** 的，那么 $F$ 和 $E$ 也是 **独立** 的。

::: {#def-3_8_001}
如果两个事件 $E$ 和 $F$ 满足 $P(EF)=P(E)P(F)$，则 $E$ 和 $F$ 是 **独立事件**（*independent events*）。如果两个事件不是 **独立事件**，则他们之间是 **相关的**（*dependent*）。
:::

::: {#exm-3_8_a}
从一副普通的扑克牌（52 张，去掉大小王）中随机抽取一张牌。如果 $A$ 表示抽到的牌是 A，$H$ 表示抽到的牌是红桃，那么 $A$ 和 $H$ 是独立的，因为 $P(AH) = \frac{1}{52}$，而 $P(A) = \frac{4}{52}$ 且 $P(H) = \frac{13}{52}$。
:::

::: {#exm-3_8_b}
如果我们用 $E$ 来表示下一任美国总统是共和党人，用 $F$ 来表示未来一年内会发生大地震，那么大多数人可能都会假设 $E$ 和 $F$ 是独立的。然而，如果 $G$ 表示未来两年内会发生经济衰退，则 $E$ 与 $G$ 是否是 **独立事件** 可能就会存在一些争议。
:::

接下来我们将说明：如果 $E$ 和 $F$ 是独立的，则 $E$ 和 $F^c$ 也是独立的。

::: {#prp-3_8_1}
如果 $E$ 和 $F$ 是 **独立** 的，则 $E$ 和 $F^c$ 也是 **独立** 的。
:::

::: {.callout-tip title="@prp-3_8_1 的证明过程"}
假设 $E$ 和 $F$ 是 **独立事件**。因为 $E = EF \cup EF^c$，并且显然， $EF$ 和 $EF^c$ 是互斥事件，于是有：

$$
\begin{align}
P(E)&=P(EF) + P(EF^c) \\
&=P(E)P(F) + P(EF^c) \\
\therefore P(EF^c)&= P(E)(1-P(F)) \\
&=P(E)P(F^c)
\end{align}
$$
:::

因此，如果 $E$ 独立于 $F$，那么 $E$ 发生的概率不会因 $F$ 是否发生而改变。

现在假设 $E$ 即独立于 $F$，也独立于 $G$。那么 $E$ 是否肯定独立于 $FG$？令人惊讶的是，答案是否定的。

::: {#exm-3_8_c}
抛两颗公平（骰子的点是等概率事件）的骰子。令 $E_7$ 表示两颗骰子的点数之和为 7，令 $F$ 表示第一颗骰子的点数为 4，令 $T$ 表示第二颗骰子的点数为 3。可以证明（习题 36）$E_7$ 独立于 $F$，且 $E_7$ 也独立于 $T$，但显然 $E_7$ 不独立于 $FT$（因为 $P(E_7|FT) = 1$）。
:::

根据 @exm-3_8_c，看起来，对于 3 个事件之间的独立性的定义，仅仅满足 $\left(\begin{array}{cc}  3 \\ 2  \end{array}\right)$ 对事件之间是独立的是不够的。

::: {#def-3_8_002}
对于三个事件：$E$, $F$, $G$，如果他们满足：

$$
\begin{align}
P(EFG) &= P(E)P(F)P(G) \\
P(EF) &= P(E)P(F) \\
P(EG) &= P(E)P(G) \\
P(FG) &= P(F)P(G)
\end{align}
$$

则 $E$，$F$，$G$ 是相互独立的。
:::

需要注意的是，如果事件 $E$、$F$、$G$ 是独立的，那么 $E$ 和由 $F$ 和 $G$ 形成的任何事件之间也是独立的。例如，$E$ 与 $F \cup G$ 独立，因为：

$$
\begin{align}
P\bigg(E(F \cup G)\bigg) &= P(EF \cup EG) \\
&=P(EF) + P(EG) - P(EFG) \\
&=P(E)P(F) + P(E)P(G) - P(E)P(FG) \\
&=P(E)\bigg(P(F) + P(G) - P(FG)\bigg) \\
&=P(E)P(F \cup G)
\end{align}
$$

当然，我们可以将 @def-3_8_002 扩展到大于 3 个事件的范围。对于 $n$ 个事件 $E_1, E_2, ..., E_n$，如果这 $n$ 个事件的所有的子集 $E_{1}, E_{2}, ..., E_{r},\ r \le n$ 都满足 $P(E_{1}E_{2}...E_{r})$ = $P(E_1)P(E_2)...P(E_r)$，则这 n 个事件是相互独立的。

有时，我们所考虑的实验需要执行一系列子实验。例如，如果实验为连续抛掷硬币，那么我们可以将每次抛掷都视为一个子实验。在许多情况下，我们会假设任何一个子实验的结果对其他子实验没有影响，此时，我们说这些子实验之间是 **独立** 的。

::: {#exr-3_8_d}
如果一个系统由 $n$ 个独立组件构成，且当至少有一个组件工作时，该系统就能工作，那么我们就称这个系统为并行系统，如 @fig-3_7。对于这样一个系统，如果组件 $i$ 与其他组件独立，并以$p_i, i=1,2,...,n$ 的概率发挥作用，那么整个系统可工作的概率是多少？

![并行系统示意图](../images/chapter_3/f_3_7.png){#fig-3_7}

:::

::: {#sol-3_8_d}
令 $A_i$ 表示事件：组件 $i$ 可以工作，则：

$$
\begin{align}
P(系统可工作) &= 1 - P(系统不可工作) \\
&= 1 - P(所有组件均无法工作) \\
&= 1 - P(A_1^c A_2^c \cdot \cdot \cdot A_n^c) \\
&= 1 - \prod_{i=1}^{n}{P(A_i^c)} \\
&= 1 - \prod_{i=1}^{n}{(1-p_i)}
\end{align}
$$

:::

::: {#exr-3_8_e}
有 $n$ 张优惠券，每张优惠券的类型均不同且相互独立，第 $j$ 张优惠券的类型为 $j$，且其出现的概率为 $p_j$，$\sum_{j=1}^{n}{p_j}=1$。我们从其中选取 $k$ 张优惠券，计算在第 $i$ 类优惠券存在的情况下，第 $j$ 类优惠券也存在的概率（$i \ne j$）。
:::

::: {#sol-3_8_e}
令 $A_r$ 为事件：我们收集的优惠券中存在类型为 $r$ 的优惠券，则 $P(A_j|A_i)=\frac{ P(A_jA_i) }{ P(A_i) }$。可以考虑使用补集来计算 $P(A_i)$ 和 $P(A_jA_i)$：

$$
\begin{align}
P(A_i) &= 1-P(A_i^c) \\
&= 1-P\{k张优惠券均不是第 i 类优惠券\} \\
&= 1 - \prod_{l=1}^{k}{\big(1 - P(A_i)\big)} \\
&= 1 - (1 - p_i)^k \\
P(A_iA_j) &= 1 - P(A_i^c \cup A_j^c) \\
&= 1 - \bigg(P(A_i^c) + P(A_j^c) - P(A_i^c A_j^c)\bigg) \\
&= 1 - (1-p_i)^k - (1 - p_j)^k + (1 - p_i - p_j)^k 
\end{align}
$$

因此，$P(A_j|A_i)=\frac{ 1 - (1-p_i)^k - (1 - p_j)^k + (1 - p_i - p_j)^k }{ 1 - (1 - p_i)^k }$。
:::

::: {.callout-note title="务必区分 **独立事件** 和 **互斥事件**"}
在 @sec-3_2 中，我们提到：

> 如果 $EF = \emptyset$，则意味着 $E$ 和 $F$ 不能同时发生，此时我们称 $E$ 和 $F$ 为 **互斥事件**。

在本节中，我们提到：

> 如果 $F$ 是否发生不会改变 $E$ 发生的概率，那么 $E$ 和 $F$ 就是 **相互独立** 的。且 $P(EF)=P(E)P(F)$。

我们往往会混淆 **独立事件** 和 **互斥事件** 的概念，互斥指的是两个随机事件没有共同的基本事件，也即这两个事件不可能同时发生。从集合观点看，即两个事件没有交集，即 $EF = \emptyset$。

那么，如果 $E$ 和 $F$ 独立，是否意味着：

$$
E和F相互独立 \Longleftrightarrow E和F没有关联 \Longleftrightarrow E \cap F = \emptyset
$$

显然，这是不对的。比如，生一个孩子，现有两事件：

* $E$：孩子是男孩
* $F$：孩子是女孩

显然，$E$ 和 $F$ 是互斥的。

如果生两个孩子，也有两个事件：

* $A$：第一个孩子是男孩
* $B$：第二个孩子是女孩

此时，$A$ 和 $B$ 是相互独立的，因为第一个孩子的性别肯定和第二个孩子的性别是没有关联的。那么事件 $AB$（也就是生两个孩子，第一个孩子是男孩且第二个孩子是女孩）的概率是多少 呢？

显然，$P(AB)=\frac{ 1 }{ 4 }$。此时，即 $A$ 和 $B$ 是相互独立的，$A \cap B$ 也是存在的。
:::